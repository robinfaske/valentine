<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <style>
    :root{
      --bg1:#ffe6ef;
      --bg2:#fff6fb;
      --card:#ffffffcc;
      --pink:#ff4fa3;
      --pink2:#ff86c6;
      --shadow: 0 18px 45px rgba(255, 79, 163, .18);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
      user-select:none;
      background:
        radial-gradient(900px 500px at 20% 20%, #fff 0%, transparent 55%),
        radial-gradient(700px 450px at 80% 30%, #fff 0%, transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    .bg-heart{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 0;
      opacity: .35;
      filter: blur(.2px);
    }
    .bg-heart::before,
    .bg-heart::after{
      content:"";
      position:absolute;
      width: 14px;
      height: 14px;
      background: rgba(255, 79, 163, .22);
      transform: rotate(45deg);
      border-radius: 3px;
      animation: floaty 7s linear infinite;
    }
    .bg-heart::before{
      left: 10%;
      top: 75%;
      animation-duration: 8.5s;
    }
    .bg-heart::after{
      left: 82%;
      top: 80%;
      animation-duration: 10.5s;
      background: rgba(255, 134, 198, .20);
    }
    @keyframes floaty{
      0%{ transform: translateY(0) rotate(45deg); opacity:.15; }
      60%{ opacity:.30; }
      100%{ transform: translateY(-120vh) rotate(45deg); opacity:.0; }
    }

    /* Flowers pinned to the viewport */
    .flower{
      position: fixed;
      pointer-events: none;
      z-index: 2;
      opacity: .98;
      filter: drop-shadow(0 14px 26px rgba(0,0,0,.10));
      height: auto;
    }
    .flower.topleft{
      top: -10px;
      left: -10px;
      width: min(260px, 36vw);
    }
    .flower.topright{
      top: -10px;
      right: -10px;
      width: min(260px, 36vw);
    }
    .flower.bottom{
      bottom: -12px;
      left: 50%;
      transform: translateX(-50%);
      width: min(520px, 86vw);
      z-index: 1;
      opacity: .92;
    }

    /* Center card */
    .card{
      position: relative;
      z-index: 10;
      width: min(560px, calc(100vw - 32px));
      padding: 28px 22px;
      border-radius: 22px;
      background: var(--card);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 79, 163, .18);
      backdrop-filter: blur(6px);
      text-align: center;
      margin: 0 auto;
      top: 50vh;
      transform: translateY(-55%);
    }

    h1{
      margin: 0 0 10px;
      font-size: clamp(24px, 4vw, 34px);
      letter-spacing: .2px;
    }

    p{
      margin: 0 0 18px;
      opacity: .75;
    }

    .buttons{
      display:flex;
      justify-content:center;
      gap:14px;
      margin-top: 14px;
    }

    button{
      border:0;
      padding: 12px 18px;
      font-size: 18px;
      border-radius: 14px;
      cursor:pointer;
      box-shadow: 0 10px 25px rgba(0,0,0,.10);
      transition: transform .08s ease, filter .2s ease;
    }
    button:active{ transform: translateY(1px) scale(.99); }
    button:focus-visible{ outline: 3px solid rgba(255,79,163,.35); outline-offset: 3px; }

    #yes{
      background: linear-gradient(135deg, #ff3f9a, #ff77c4);
      color: #fff;
      min-width: 120px;
    }

    /* No button: fixed and moves around */
    #no{
      position: fixed;
      left: 70vw;
      top: 62vh;
      background: #fff;
      color: #444;
      border: 1px solid rgba(0,0,0,.08);
      min-width: 120px;
      z-index: 12;
      transition: left 140ms ease, top 140ms ease;
    }

    /* Cursor heart trail */
    .heart{
      position: fixed;
      left: 0;
      top: 0;
      transform: translate(-50%, -50%);
      pointer-events:none;
      z-index: 9999;
      color: var(--pink);
      text-shadow: 0 6px 18px rgba(255, 79, 163, .28);
      will-change: transform, opacity;
      animation: heart-float 900ms ease-out forwards;
    }
    @keyframes heart-float{
      0%   { opacity: 1; transform: translate(-50%, -50%) translateY(0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(-50%, -50%) translateY(-42px) scale(.7) rotate(12deg); }
    }

    @media (max-width: 420px){
      #no, #yes{ min-width: 110px; font-size: 17px; }
      .card{ padding: 22px 16px; }
      .flower.bottom{ width: min(520px, 96vw); }
    }
  </style>
</head>

<body>
  <div class="bg-heart" aria-hidden="true"></div>

  <!-- Filenames match your repo -->
  <img class="flower topleft"  src="topleft.png"  alt="" aria-hidden="true">
  <img class="flower topright" src="topright.png" alt="" aria-hidden="true">
  <img class="flower bottom"   src="bottom.png"  alt="" aria-hidden="true">

  <main class="card" id="card">
    <h1>Will you be my Valentine? üíò</h1>
    <p>(Be honest‚Ä¶ if you can catch the ‚ÄúNo‚Äù.)</p>

    <div class="buttons">
      <button id="yes">Yes</button>
    </div>
  </main>

  <button id="no" aria-label="No">No</button>

  <script>
    const yesBtn = document.getElementById('yes');
    const noBtn  = document.getElementById('no');
    const card   = document.getElementById('card');

    yesBtn.addEventListener('click', () => alert("Yay!! ‚ù§Ô∏èüå∏"));
    noBtn.addEventListener('click', () => alert("Nice try üòÖ"));

    // --- No button chase logic ---
    let lastMove = 0;
    let dodges = 0;
    let hasFledOnce = false;

    const FLEE_RADIUS_FIRST = 110; // first approach (when it's next to Yes)
    const FLEE_RADIUS = 130;       // afterwards
    const COOLDOWN_MS = 120;
    const EDGE_PAD = 12;
    const MAX_TRIES = 40;

    function rectsOverlap(a, b){
      return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
    }

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    function spawnNoNextToYes(){
      // Put No right next to Yes (to the right), but still not inside the card text weirdly.
      const yesRect  = yesBtn.getBoundingClientRect();
      const cardRect = card.getBoundingClientRect();

      const btnW = noBtn.offsetWidth;
      const btnH = noBtn.offsetHeight;

      const gap = 14; // similar to the .buttons gap
      let x = yesRect.right + gap;
      let y = yesRect.top + (yesRect.height - btnH) / 2;

      // Keep it inside the viewport
      x = clamp(x, EDGE_PAD, window.innerWidth - btnW - EDGE_PAD);
      y = clamp(y, EDGE_PAD, window.innerHeight - btnH - EDGE_PAD);

      // If that would overlap the card area too awkwardly (rare), place it slightly lower.
      const candidate = { left:x, top:y, right:x+btnW, bottom:y+btnH };
      const forbidden = cardRect;

      if (rectsOverlap(candidate, forbidden) && (x > cardRect.left && x < cardRect.right)) {
        y = clamp(cardRect.bottom + 10, EDGE_PAD, window.innerHeight - btnH - EDGE_PAD);
      }

      noBtn.style.left = `${x}px`;
      noBtn.style.top  = `${y}px`;
    }

    function placeNoButtonRandom(avoidPoint){
      const vw = window.innerWidth;
      const vh = window.innerHeight;

      const forbidden = card.getBoundingClientRect();

      const btnW = noBtn.offsetWidth;
      const btnH = noBtn.offsetHeight;

      const minX = EDGE_PAD;
      const maxX = vw - btnW - EDGE_PAD;
      const minY = EDGE_PAD;
      const maxY = vh - btnH - EDGE_PAD;

      for(let i=0;i<MAX_TRIES;i++){
        const x = minX + Math.random() * (maxX - minX);
        const y = minY + Math.random() * (maxY - minY);

        const candidate = { left:x, top:y, right:x+btnW, bottom:y+btnH };
        if(rectsOverlap(candidate, forbidden)) continue;

        if(avoidPoint){
          const cx = x + btnW/2;
          const cy = y + btnH/2;
          const d = Math.hypot(cx - avoidPoint.x, cy - avoidPoint.y);
          if(d < 180) continue;
        }

        noBtn.style.left = `${x}px`;
        noBtn.style.top  = `${y}px`;
        return true;
      }

      noBtn.style.left = `${Math.max(minX, maxX*0.7)}px`;
      noBtn.style.top  = `${Math.max(minY, maxY*0.65)}px`;
      return false;
    }

    // Initial spawn next to Yes
    window.addEventListener('load', () => {
      spawnNoNextToYes();
      hasFledOnce = false;
    });

    window.addEventListener('pointermove', (e) => {
      const now = performance.now();
      if(now - lastMove < COOLDOWN_MS) return;

      const r = noBtn.getBoundingClientRect();
      const cx = r.left + r.width/2;
      const cy = r.top  + r.height/2;
      const dist = Math.hypot(e.clientX - cx, e.clientY - cy);

      const dynamicRadius = Math.max(70, FLEE_RADIUS - dodges * 6);
      const radius = hasFledOnce ? dynamicRadius : FLEE_RADIUS_FIRST;

      if(dist < radius){
        dodges++;
        lastMove = now;
        hasFledOnce = true;
        placeNoButtonRandom({x:e.clientX, y:e.clientY});
      }
    }, { passive:true });

    window.addEventListener('resize', () => {
      spawnNoNextToYes();
      hasFledOnce = false;
    });

    // --- Heart cursor trail ---
    let lastHeart = 0;
    const HEART_RATE_MS = 14;

    window.addEventListener('pointermove', (e) => {
      const now = performance.now();
      if(now - lastHeart < HEART_RATE_MS) return;
      lastHeart = now;

      const h = document.createElement('span');
      h.className = 'heart';
      h.textContent = '‚ù§';

      const size = 10 + Math.random() * 14;
      const rot  = (Math.random() * 50 - 25);

      h.style.left = `${e.clientX}px`;
      h.style.top  = `${e.clientY}px`;
      h.style.fontSize = `${size}px`;
      h.style.color = Math.random() < 0.5 ? '#ff4fa3' : '#ff86c6';
      h.style.transform = `translate(-50%, -50%) rotate(${rot}deg)`;

      document.body.appendChild(h);
      h.addEventListener('animationend', () => h.remove());
    }, { passive:true });
  </script>
</body>
</html>
